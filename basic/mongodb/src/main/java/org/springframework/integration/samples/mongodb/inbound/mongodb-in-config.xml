<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="https://www.springframework.org/schema/beans"
	xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance"
	xmlns:int="https://www.springframework.org/schema/integration"
	xmlns:int-mongodb="https://www.springframework.org/schema/integration/mongodb"
	xmlns:mongo="https://www.springframework.org/schema/data/mongo"
	xsi:schemaLocation="https://www.springframework.org/schema/data/mongo https://www.springframework.org/schema/data/mongo/spring-mongo.xsd
		https://www.springframework.org/schema/integration https://www.springframework.org/schema/integration/spring-integration.xsd
		https://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
		https://www.springframework.org/schema/integration/mongodb https://www.springframework.org/schema/integration/mongodb/spring-integration-mongodb.xsd">


	<mongo:db-factory id="mongoDbFactory" dbname="test"/>

	<int-mongodb:inbound-channel-adapter id="simpleInboundAdapter" channel="splittingChannel"
									     query="{address.state : 'CA'}">
		<int:poller fixed-rate="60000" max-messages-per-poll="1"/>
	</int-mongodb:inbound-channel-adapter>

	<int:splitter input-channel="splittingChannel" output-channel="logger"/>

	<int:logging-channel-adapter id="logger" level="WARN"/>

</beans>
